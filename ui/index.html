<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STIX Threat Intelligence Q&A</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
  <div class="container">
    <header>
      <h1>ğŸ”’ STIX Threat Intelligence</h1>
      <p class="subtitle">Ask questions about cyber threats in natural language</p>
    </header>

    <!-- Config Section -->
    <details class="config-section" id="configSection">
      <summary>âš™ï¸ Configuration</summary>
      <div class="config-content">
        <div class="config-field">
          <label for="apiKey">Claude API Key</label>
          <input type="password" id="apiKey" placeholder="sk-ant-..." />
        </div>
        <div class="config-field">
          <label for="mcpUrl">TypeDB MCP URL</label>
          <input type="text" id="mcpUrl" value="http://localhost:8001" />
        </div>
      </div>
    </details>

    <!-- Query Section -->
    <div class="query-section">
      <div class="input-wrapper">
        <textarea id="questionInput"
          placeholder="Ask about cyber threats... e.g., 'What attack techniques does Salt Typhoon use?'"
          rows="2"></textarea>
        <button id="askButton" onclick="handleQuery()">
          <span class="btn-text">Ask</span>
          <span class="btn-loading" hidden>â³</span>
        </button>
      </div>
    </div>

    <!-- Response Section -->
    <div class="response-section" id="responseSection" hidden>
      <div class="answer-box">
        <h3>ğŸ’¡ Answer</h3>
        <div id="answerContent" class="answer-content"></div>
      </div>

      <div class="query-box">
        <h3>ğŸ” TypeQL Query Used</h3>
        <pre id="queryContent" class="query-content"></pre>
      </div>

      <div class="query-box">
        <h3>ğŸ“Š TypeQL Query Response</h3>
        <pre id="queryResponseContent" class="query-content"></pre>
      </div>
    </div>

    <!-- Error Section -->
    <div class="error-section" id="errorSection" hidden>
      <div class="error-box">
        <span class="error-icon">âš ï¸</span>
        <span id="errorMessage"></span>
      </div>
    </div>

    <footer>
      <p>Powered by TypeDB + Claude | Data: STIX 2.1</p>
    </footer>
  </div>

  <script type="module" src="app.js"></script>
</body>

</html>